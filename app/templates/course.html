{% block content %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/emn178/chartjs-plugin-labels/src/chartjs-plugin-labels.js"></script>

  </head>
  <body>
    <br>
    <center><h1>CornellCensus Data</h1></center>
    <br>
    <center><h4>Course Enrollment (Spring 2022)</h4></center>
    <div style="align-items:center;"><canvas id="myChart" width="1200" height="500" style="margin:0 auto;"></canvas></div>
    <br>
   
    <script>
      Chart.defaults.global.responsive = false;
      var cnum = {{ enrollment|safe }};
      var cname = {{ names|safe }};

      var cnum_limited = [];
      var cname_limited = [];
    
      var iter = 30;
      for(let i = 0; i < iter; i++){
        cname_limited.push(cname[i]);
        cnum_limited.push(cnum[i]);
      }

      var colors = [];
      for(let i = 0; i < iter; i++){
        if(i % 1 == 0){colors.push('#f56954');}
        if(i % 2 == 0){colors.push('#00a65a');}
        if(i % 3 == 0){colors.push('#f39c12');}
        if(i % 4 == 0){colors.push('#3c8dbc');}
        if(i % 5 == 0){colors.push('#d2d6df');}
      }
      

      var chartData = {
                    labels: cname_limited,
                    datasets: [
                      {
                        data: cnum_limited,
                        backgroundColor : colors,
                      }
                    ]
      }



      var ctx = document.getElementById("myChart").getContext("2d");

      var options = {
              tooltips: {
                enabled: false
              },
              plugins: {
                labels: [
                        {
                            render: 'label',
                            position: 'outside',
                            fontColor: '#000',
                            fontSize: 20
                        },
                        {
                            render: 'percentage',
                            fontColor: '#000',
                            fontSize: 8,
                            position: 'border',
                        }
                ]
               }
};

      // create the chart using the chart canvas
      var myChart = new Chart(ctx, {
        type: 'bar',
        data: chartData,
        options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero: true
                  }
              }],
          },
          plugins: {
          labels: {
            render: () => {}
          }
        },
        legend: {
            display: false
         }
}
      });



    </script>
  </body>
</html> 
{% endblock %}
